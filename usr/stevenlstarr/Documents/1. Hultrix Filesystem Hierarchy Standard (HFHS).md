This is the official **Hultrix Operating System Specification (v1.0)**.

This document defines the filesystem hierarchy, application packaging standard, and user interaction logic for the OS. It serves as the blueprint for the kernel team, the shell developers, and the SDK team.

------

# 1. Hultrix Filesystem Hierarchy Standard (HFHS)

### 1.1 Philosophy

The filesystem observes a "Dual-Personality" architecture:

- **The System Layer (Lowercase):** Optimized for administrators and scripts. Located at the root. Immutable where possible.
- **The User Layer (Capitalized):** Optimized for consumers and GUI discoverability. Located within `/usr`.

### 1.2 Root Directory Structure

The root `/` is the strict domain of the OS administrator.

| **Path** | **Type** | **Description**                                              |
| -------- | -------- | ------------------------------------------------------------ |
| `/apps`  | Dir      | **Global Applications.** Contains `.app` bundles installed for all users. |
| `/logs`  | Mount    | **System Logs.** Persistent storage for system and service logs. |
| `/mnt`   | Dir      | **Mount Points.** Empty directory for external drives, network shares, and temporary mounts. |
| `/pub`   | Dir      | **Public Shared.** A "Drop Box" for file sharing between users on the system. |
| `/sys`   | Dir      | **System Core.** The operating system engine. **Read-Only** by default. |
| `/tmp`   | Mount    | **Temporary.** Volatile RAM disk (tmpfs). Cleared on reboot. Holds PID/Lock files. |
| `/usr`   | Dir      | **Users.** Parent directory for user home folders.           |

### 1.3 The System Core (`/sys`)

This directory contains the essential binaries and libraries required to boot and run the OS.

- **`/sys/apps`** – Base system tools (flat binaries: `sh`, `ls`, `cp`, `init`).
- **`/sys/boot`** – **Mount Point.** The EFI System Partition (contains Kernel `vmlinuz`, Initrd, Bootloader).
- **`/sys/conf`** – System-wide configuration text files (Network, Time, Users).
- **`/sys/dev`** – **Mount Point.** Device nodes (`devtmpfs`).
- **`/sys/lib`** – Core system libraries (`libc.so`, `ld.so`) and drivers.
- **`/sys/proc`** – **Mount Point.** Process information (`procfs`).
- **`/sys/subs`** – **Mount Point.** Kernel subsystems (`sysfs`).

### 1.4 The User Home (`/usr/username`)

This directory is the "product" the user sees. It uses capitalized names for visual hierarchy.

| **Path**         | **Description**                                              |
| ---------------- | ------------------------------------------------------------ |
| `~/Applications` | **User Apps.** Local `.app` bundles installed by the specific user. |
| `~/Desktop`      | **Workspace.** Files rendered on the graphical desktop background. |
| `~/Documents`    | **Personal Files.** General storage.                         |
| `~/Downloads`    | **Inbox.** Default location for web browser downloads.       |
| `~/Media`        | **Multimedia Root.** Contains subfolders `Music/` and `Video/`. |
| `~/Pictures`     | **Images.** Photos and screenshots.                          |
| `~/.conf`        | **User Config.** Hidden directory for per-user app settings. |

------

# 2. Application Bundle Specification

Applications in Hultrix are not installed; they are placed. An application is a directory ending in `.app` that follows a strict internal structure.

### 2.1 The Bundle Structure

Example: `SpaceGame.app`

Plaintext

```
SpaceGame.app/
├── Run               # (Required) Executable Entry Point script/binary
├── icon.png          # (Required) High-res app icon
├── meta.json         # (Required) Application manifest
├── bin/              # Compiled binaries (hidden from user)
├── lib/              # Private libraries (.so)
└── res/              # Assets (images, audio, fonts)
```

### 2.2 Execution Logic

- **The `Run` File:** This must be an executable script or binary.
- **Environment:** When executed, the system **does not** modify the global `LD_LIBRARY_PATH`. The `Run` script is responsible for pointing to its own `lib/` folder if needed.
- **Working Directory:** The app must be launched with the bundle root (`SpaceGame.app/`) as the Current Working Directory (CWD).

------

# 3. User Interface & Shell Behavior

### 3.1 The File Manager (GUI)

The File Manager acts as a presentation layer over the raw filesystem.

1. **Extension Hiding:** Any directory ending in `.app` is displayed without the extension.
2. **App Interaction:**
   - **Double-click:** Executes the `./Run` file inside the bundle.
   - **Right-click:** Offers "Show Package Contents" to browse the folder structure.
3. **Root Masking:** The "Up" navigation button is disabled when the user is at `~/`. The user cannot browse `/sys` or `/apps` via the GUI file manager.
4. **External Drives:** Mounted volumes in `/mnt` appear as virtual shortcuts in the user's Sidebar.

### 3.2 The Shell (Terminal)

The shell provides raw access to the system.

1. **Default Path:** Terminal opens in `~/` (Home).
2. **Case Insensitivity:** Tab-completion is case-insensitive.
   - `cd doc[TAB]` resolves to `cd Documents/`.
   - `cd desk[TAB]` resolves to `cd Desktop/`.

### 3.3 The Unified App View

The OS Launcher (Start Menu / Dock) aggregates apps from two locations into a single list:

1. **Source A:** `/apps/*.app` (Global)
2. **Source B:** `~/Applications/*.app` (Local)
3. **Conflict Resolution:** If the same App ID exists in both, `~/Applications` takes priority.

------

# 4. Hultrix SDK Integration

The C++ SDK standardizes path resolution to ensure applications respect this hierarchy.

### 4.1 Standard Environment Variables

The Init process sets these globally:

- `HOME`: `/usr/stevenlstarr`
- `SYS_ROOT`: `/sys`
- `PATH`: `~/Applications/bin:/apps/bin:/sys/apps` (Prioritizes local apps over system tools)

### 4.2 Path Resolution API

The SDK provides `Hultrix::System::Path` to abstract file locations.

C++

```
// Returns path to the current bundle: "/apps/Game.app"
Path bundle = Hultrix::App::GetLocation(); 

// Returns path to user config: "/usr/steven/.conf/GameID/"
Path config = Hultrix::User::GetConfigDir(); 

// Returns path to temp storage: "/tmp/run/user/GameID/"
Path temp   = Hultrix::System::GetRuntimeDir();
```

------

### **Action Item**

This specification is now ready for implementation.

**Would you like me to generate the standard `meta.json` schema (the file inside every app) so your SDK knows exactly what fields to parse?**







```
/
├── apps                  # user-installed applications (global)
│   └── sdk               # hultrix sdk + development tools
├── mnt                   # mount points for external, network, or virtual filesystems
├── pub                   # public/shared files accessible to all users
├── tmp                   # temporary files (volatile; cleared on reboot)
├── logs                  # global OS and service logs
├── sys                   # core operating system (kernel + system internals)
│   ├── boot              # kernel, initrd, bootloader configs, EFI assets
│   ├── bin               # system executables (your /bin + /sbin equivalent)
│   ├── dev               # device nodes (devtmpfs mountpoint)
│   ├── lib               # system libraries (.so files, runtimes)
│   ├── proc              # process info filesystem (procfs mountpoint)
│   ├── conf              # global system configuration (replaces /etc)
│   └── subs              # kernel subsystems & hardware topology (sysfs mountpoint)
└── usr                   # user accounts and personal data
    └── stevenlstarr      # individual user directory
        ├── Applications  # user-local applications
        ├── Desktop       # desktop environment files / shortcuts
        ├── Documents     # user documents
        ├── Downloads     # downloads
        ├── Media         # multimedia root
        │   ├── Music     # audio files
        │   └── Video     # video files
        ├── Pictures      # images and photos
        └── .conf         # per-user configuration

```

